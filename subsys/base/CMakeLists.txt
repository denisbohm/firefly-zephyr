set(OVERLAY_CONFIG Kconfig)

zephyr_include_directories(include)

zephyr_sources(src/fd_adc_dispatch.c)
if(CONFIG_FIREFLY_SUBSYS_BASE_ADC_NRF5)
zephyr_sources(src/fd_adc_nrf5.c)
endif()
zephyr_sources(src/fd_animation.c)
zephyr_sources(src/fd_assert.c)
zephyr_sources(src/fd_assert_log.c)
zephyr_sources(src/fd_binary.c)
zephyr_sources(src/fd_bit.c)
zephyr_sources(src/fd_calendar.c)
zephyr_sources(src/fd_cobs.c)
zephyr_sources(src/fd_counter_zephyr.c)
zephyr_sources(src/fd_crc16.c)
zephyr_sources(src/fd_crc32.c)
zephyr_sources(src/fd_delay_zephyr.c)
zephyr_sources(src/fd_delta.c)
zephyr_sources(src/fd_dispatch.c)
zephyr_sources(src/fd_envelope.c)
zephyr_sources(src/fd_error.c)
zephyr_sources(src/fd_eval.c)
zephyr_sources(src/fd_event.c)
zephyr_sources(src/fd_fifo.c)
zephyr_sources(src/fd_gateway.c)
zephyr_sources(src/fd_gpio_dispatch.c)
zephyr_sources(src/fd_gpio_zephyr.c)
zephyr_sources(src/fd_i2cm.c)
zephyr_sources(src/fd_i2cm_bitbang.c)
zephyr_sources(src/fd_i2cm_dispatch.c)
if(CONFIG_FIREFLY_SUBSYS_BASE_I2C_NRF5)
zephyr_sources(src/fd_i2cm_nrf5.c)
endif()
zephyr_sources(src/fd_ieee754.c)
if(CONFIG_FIREFLY_SUBSYS_BASE_INTERRUPT_NRF5)
zephyr_sources(src/fd_interrupt_nrf5.c)
endif()
zephyr_sources(src/fd_led.c)
zephyr_sources(src/fd_object_fifo.c)
if(CONFIG_FIREFLY_SUBSYS_BASE_PWM_NRF5)
zephyr_sources(src/fd_pwm_nrf5.c)
endif()
zephyr_sources(src/fd_remote.c)
if(CONFIG_FIREFLY_SUBSYS_BASE_RTC_NRF5)
zephyr_sources(src/fd_rtc_nrf5.c)
endif()
zephyr_sources(src/fd_spim.c)
zephyr_sources(src/fd_spim_dispatch.c)
if(CONFIG_FIREFLY_SUBSYS_BASE_SPIM_NRF5)
zephyr_sources(src/fd_spim_nrf5.c)
endif()
zephyr_sources(src/fd_system.c)
zephyr_sources(src/fd_system_dispatch.c)
zephyr_sources(src/fd_system_remote.c)
if(CONFIG_HWINFO)
    zephyr_sources(src/fd_system_zephyr.c)
endif()
zephyr_sources(src/fd_timer.c)
zephyr_sources(src/fd_timing.c)
if(CONFIG_FIREFLY_SUBSYS_BASE_TIMING_NRF5)
zephyr_sources(src/fd_timing_nrf5.c)
endif()
if(CONFIG_FIREFLY_SUBSYS_BASE_TIMING_STM32)
zephyr_sources(src/fd_timing_stm32.c)
endif()
if(CONFIG_FIREFLY_SUBSYS_BASE_UART_NRF5)
zephyr_sources(src/fd_uart_nrf5.c)
else()
zephyr_sources(src/fd_uart_zephyr.c)
endif()

zephyr_sources(src/fd_version.c)

if(CONFIG_FIREFLY_SUBSYS_BASE_LOG)
    zephyr_sources(src/fd_log_zephyr.c)
endif()

if(CONFIG_FIREFLY_SUBSYS_BASE_TEST)
    zephyr_sources(src/fd_test.c)
endif()

if(CONFIG_FIREFLY_SUBSYS_BASE_WORK_ZEPHYR)
    zephyr_sources(src/fd_work_zephyr.c)
else()
    zephyr_sources(src/fd_work.c)
endif()
